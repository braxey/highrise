<div class="border-sidebar-border/80 border-b" data-controller="header">
  <div class="mx-auto flex h-16 items-center px-4 md:max-w-7xl">
    <%= render "layouts/application/header_nav_items" %>

    <!-- User Dropdown -->
    <div class="ml-auto flex items-center space-x-2">
      <% if @current_user %>
        <div class="relative">
          <button data-action="click->header#toggleDropdown" class="relative flex justify-center items-center min-size-8 max-size-8 rounded-full cursor-pointer border-3 border-gray-100">
            <%= render "shared/components/avatar", user: @current_user,
              classes: "size-8 hover:ring-2 ring-gray-300",
              fallback_classes: "flex size-8 rounded-full text-center align-middle bg-white hover:bg-gray-100 border-0" %>
          </button>
          <div data-header-target="dropdownMenu" class="bg-popover text-popover-foreground z-50 min-w-[8rem] overflow-hidden rounded-md border p-1 shadow-md absolute right-0 mt-2 hidden w-56 bg-white" data-transition-enter-from="opacity-0 scale-95" data-transition-enter-to="opacity-100 scale-100" data-transition-leave-from="opacity-100 scale-100" data-transition-leave-to="opacity-0 scale-95">
            <div class="px-2 py-1.5 text-sm font-medium data-[inset]:pl-8">
              <div class="flex items-center gap-2 px-1 py-1.5 text-left text-sm">
                <div class="relative flex size-8 shrink-0 overflow-hidden rounded-full">
                  <%= render "shared/components/avatar", user: @current_user,
                    classes: "size-8",
                    fallback_classes: "flex justify-center items-center size-8 rounded-full p-2 text-center align-middle border-gray-100 bg-gray-100" %>
                </div>
                <div class="grid flex-1 text-left text-sm leading-tight">
                  <span class="truncate font-medium"><%= @current_user.full_name %></span>
                  <span class="text-muted-foreground truncate text-xs"><%= @current_user.email_address %></span>
                </div>
              </div>
              <div class="border-b -mx-1 my-1 h-px"></div>
              <%= link_to "Dashboard", dashboard_path, class: "w-full text-left block px-2 py-1.5 text-sm text-neutral-700 hover:bg-gray-100 cursor-pointer rounded-md" %>
              <% if is_phoenix_admin? %>
                <%= link_to "Admin Panel", organizations_path, class: "w-full text-left block px-2 py-1.5 text-sm text-neutral-700 hover:bg-gray-100 cursor-pointer rounded-md" %>
              <% end %>
              <%= link_to "Settings", settings_profile_path, class: "w-full text-left block px-2 py-1.5 text-sm text-neutral-700 hover:bg-gray-100 cursor-pointer rounded-md" %>
              <div class="border-b -mx-1 my-1 h-px"></div>
              <%= button_to "Sign Out", session_path, method: :delete, class: "w-full text-left block px-2 py-1.5 text-sm text-neutral-700 hover:bg-gray-100 cursor-pointer rounded-md" %>
            </div>
          </div>
        </div>
      <% else %>
        <div class="flex items-center space-x-2"></div>
      <% end %>
    </div>
  </div>
</div>
